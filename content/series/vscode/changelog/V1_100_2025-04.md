---
title: "VSCode 1.100 (2025-04) 更新日志"
date: 2025-06-22T19:12:00+08:00
draft: false
toc: true
comments: true
weight: 10550
---

> https://code.visualstudio.com/updates/v1_100

## 本次更新看点速览

* 浮动窗口支持紧凑模式和总是保持在最上层。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-floating-window-compact-mode.mp4" type="video/mp4">
    </video>

* 通过 [`workbench.secondarySideBar.defaultVisibility`](vscode://settings/workbench.secondarySideBar.defaultVisibility) 配置项，可配置第二侧边栏默认可见：
    * hidden: 总是隐藏 （默认）。
    * visibleInWorkspace: 打开新工作区时打开。
    * visible: 总是打开。

* 展示 CSS 和 HTML 的浏览器支持情况。

    ![image](/image/vscode/css-baseline.png)

* 添加对 `.*.env` 文件的语法高亮。

## 聊天 (Chat)

* 提供了自义定 AI 的配置文件：
    * 说明文件 (Instructions files)，提供了一种描述 Markdown 文件中 AI 模型的通用准则和上下文的方法，例如代码样式规则或要使用的框架。该类型文件以 `.instructions.md` 为后缀，位于用户数据目录或工作区目录中。也可以 [`chat.instructionsFilesLocations`](vscode://settings/chat.instructionsFilesLocations) 配置项说明文件目录。
        * 可以通过 Add Context 按钮添加到聊天中。
        * 也可以通过 markdown 的 applyTo 在配置文件中指定应用的文件。

            ```markdown
            ---

            applyTo: '**/*.ts'
            ---

            Place curly braces on separate lines for multi-line blocks:
            if (condition)
            {
            doSomething();
            }
            else
            {
            doSomethingElse();
            }
            ```

        * 在用户数据目录中的说明文件，可以通过设置同步服务自动同步。

    * 提示词文件 (Prompt files)，提示文件描述独立的，完整的聊天请求，包括提示文本，聊天模式和使用的工具。提示文件可用于为常见任务创建可重复使用的聊天请求。例如，您可以添加一个提示文件以创建前端组件，或执行安全审核。该类型文件以 `.prompt.md` 为后缀。位于用户数据目录或工作区目录中。也可以 [`chat.promptFilesLocations`](vscode://settings/chat.promptFilesLocations) 配置项提示词文件目录。有如下几种方式使用：

        * 使用 `/` 在输出框中引用。

            ![image](/image/vscode/run-prompt-as-slash-command.png)

        * 在编辑器中打开提示文件，然后按编辑器工具栏中的 “运行” 按钮。这使您可以快速迭代提示并运行它，而无需切换回聊天视图。

            ![image](/image/vscode/run-prompt-from-play-button.png)

        * 在命令面板，运行 `Chat: Run Prompt File...` 命令。

        可以配置 chat 模式以及使用的工具列表：

        ```markdown
        ---

        mode: 'agent'
        tools: ['getCurrentMilestone', 'getReleaseFeatures', 'file_search', 'semantic_search', 'read_file', 'insert_edit_into_file', 'create_file', 'replace_string_in_file', 'fetch_webpage', 'vscode_search_extensions_internal']
        ---

        Generate release notes for the features I worked in the current release and update them in the release notes file. Use [release notes writing instructions file](.github/instructions/release-notes-writing.instructions.md) as a guide.
        ```

    * 详见： [prompt files 官方文档](https://code.visualstudio.com/docs/copilot/copilot-customization#_prompt-files-experimental)

* 更快的 agent 模式的代码编辑，使用 search replace 实现代码编辑。
* 将 GPT-4.1 作为默认基础模型。
* 添加 `#githubRepo` 用于搜索任意 github 代码库，也可以在自定义 instructions 中使用。

    ```markdown
    ---

    applyTo: '**'
    ---

    Use the `#githubRepo` tool with `microsoft/vscode` to find relevant code snippets in the VS Code codebase.
    Use the `#githubRepo` tool with `microsoft/typescript` to answer questions about how TypeScript is implemented.
    ```

    ![image](/image/vscode/github-repo-tool-example.png)

    如果想搜索当前代码库，可以使用 `#codebase` 工具，如果想更多的操纵 github 仓库，可以使用 [Github MCP Server](https://github.com/github/github-mcp-server?tab=readme-ov-file#github-mcp-server)。

* 可以使用 `#extensions` 工具搜索 VSCode 扩展。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-using-the-extensions-tool-to-display-popular-Java-extensions.mp4" type="video/mp4">
    </video>

* 改进 web page fetch 工具：

    * 将整个页面作为上下文。
    * 标准化页面格式（Markdown）。

* 聊天输入改进。

    * 附件： `#` 支持引用提示词文件。
    * 上下文选择器： 简化了上下文选择器，以使选择文件，文件夹和其他附件类型变得更加简单。
    * 完成按钮：  we heard your feedback about the "Done"-button and we removed it! No more confusion about unexpected session endings. Now, we only start a new session when you create a new chat (⌃L).

* 聊天模式快捷键。

    * `⌃⌘i` 打开聊天视图
    * `⇧⌘I` 快捷方式现在打开聊天视图并切换到代理模式。

    如果想为其他聊天模式设置键盘快捷键，则每个模式都有一个命令：

    * `workbench.action.chat.openAgent`
    * `workbench.action.chat.openEdit`
    * `workbench.action.chat.openAsk`

* 在 agent 模式编辑过程中，支持自动修复问题面板中的问题。可通过 [github.copilot.chat.agent.autoFix](vscode://settings/github.copilot.chat.agent.autoFix) 配置项开关。
* 在 Agent 模式下，模型可以感知到撤消和用户手动编辑，避免模型困惑。
* 对话历史摘要和提示缓存。
* MCP 支持 Streamable HTTP，更多详见： [MCP support in VS Code](https://code.visualstudio.com/docs/copilot/chat/mcp-servers)

    ```json
    {
    "servers": {
        "my-mcp-server": {
            "url": "http://localhost:3000/mcp"
            }
        }
    }
    ```

* MCP 支持图片输出。
* 增强了MCP服务器的输入，输出和进度
* MCP config generation uses inputs： To help keep your secrets secure, AI-assisted configurations generated by the `MCP: Add Server` command now generate inputs for any secrets, rather than inlining them into the resulting configuration.
* 内联聊天 V2，目标是： “将聊天融入代码”，但是在幕后使用与聊天编辑相同的逻辑。
* （实验性） 支持选择和附加 UI 元素（Web 前段的预览页面）到聊天中（添加截图和 CSS、 HTML 代码片段等）。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-showing-the-full-flow-of-the-UI-element-selection-experimental-feature.mp4" type="video/mp4">
    </video>

* （实验性） 在 Agent 模式，支持创建并启动一个任务。

## 无障碍 (Accessibility)

略，详见： [原文](https://code.visualstudio.com/updates/v1_100#_accessibility)。

## 编辑体验 (Editor Experience)

* 浮动窗口支持紧凑模式和总是保持在最上层。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-floating-window-compact-mode.mp4" type="video/mp4">
    </video>

    支持将 Chat 框弹出到独立窗口中，并保持在最上层。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-floating-window-always-on-top.mp4" type="video/mp4">
    </video>

    新增了一些列命令可以绑定键盘快捷键。

    * `workbench.action.toggleWindowAlwaysOnTop`: to toggle always on top mode
    * `workbench.action.enableWindowAlwaysOnTop`: to set the floating window always on top
    * `workbench.action.disableWindowAlwaysOnTop`: to set the floating window to normal
    * `workbench.action.toggleCompactAuxiliaryWindow`: to toggle compact mode
    * `workbench.action.enableCompactAuxiliaryWindow`: to enable compact mode
    * `workbench.action.disableCompactAuxiliaryWindow`: to disable compact mode

* 通过 [`workbench.secondarySideBar.defaultVisibility`](vscode://settings/workbench.secondarySideBar.defaultVisibility) 配置项，可配置第二侧边栏默认可见：
    * hidden: 总是隐藏 （默认）。
    * visibleInWorkspace: 打开新工作区时打开。
    * visible: 总是打开。

    这个配置项，只应用首次打开工作区。后续打开工作区，将使用上次状态。

* 强制扩展签名验证，详见： [原文](https://code.visualstudio.com/updates/v1_100#_mandatory-extension-signature-verification)。
* 对于被识别为恶意的扩展，添加了解更多连接，详见： [原文](https://code.visualstudio.com/updates/v1_100#_learn-more-links-for-malicious-extensions)。
* 避免在 VSCode Stable 中使用 pre-release 版的 Copilot。
* 支持打开一个视图但不切换焦点的选项，通过 `{ preserveFocus: boolean}` 配置。
* （实验性）语义文本搜索，提供关键字建议。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-AI-powered-keyword-suggestions-in-Visual-Studio-Code.mp4" type="video/mp4">
    </video>

## 代码编辑 (Code Editing)

* 新的下一个编辑建议（NES）模型。
* 在 JavaScript 和 TypeScript 语言的 NES 支持自动添加缺失的导入，通过 [`github.copilot.nextEditSuggestions.fixes`](vscode://settings/github.copilot.nextEditSuggestions.fixes) 配置项。

    ![image](/image/vscode/nes-import.png)

* NES 在 VSCode Insiders 已经默认启用。
* 支持在 HTML 或 Markdown 生成 alt。

    ![image](/image/vscode/generate-alt-text.png)

## 笔记本 (Notebooks)

* 笔记本查找控件现在支持查找和替换输入字段的持久历史记录。
* 支持将 cell 和输出拖拽到聊天视图。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-multiple-cell-outputs-being-attached-as-chat-context-via-drag-and-drop.mp4" type="video/mp4">
    </video>

* 为 agent 模式添加了一系列 Notebook 工具，详见： [原文](https://code.visualstudio.com/updates/v1_100#_notebook-tools-for-agent-mode)。

## 源代码版本控制 (Source Control)

* 编辑器快速差异装饰条支持勾选来源。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-managing-staged-changed-from-an-editor-by-using-diff-decorations.mp4" type="video/mp4">
    </video>

## 调试 (Debugging)

* 反编译视图新增上下文菜单。
* 在 Node v22.14.0 以上版本，调试 JavaScript，默认展示调试器网络视图，该功能在 [1.93 版本](https://code.visualstudio.com/updates/v1_93#_experimental-network-view)已开始实验。

## 语言 (Languages)

* 展示 CSS 和 HTML 的浏览器支持情况。

    ![image](/image/vscode/css-baseline.png)

* 添加对 `.*.env` 文件的语法高亮。
* （实验性） JavaScript 和 TypeScript Hover 只是展开和折叠。可通过 [`typescript.experimental.expandableHover`](vscode://settings/typescript.experimental.expandableHover) 开启。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-TypeScript-expandable-hover.mp4" type="video/mp4">
    </video>

## 远程开发 (Remote Development)

略，详见：[原文](https://code.visualstudio.com/updates/v1_100#_remote-development)。

## 贡献到扩展 (Contributions to extensions)

* Python
    * 支持分支覆盖率。`coveragepy` 版本必须 >= 7.7 。

        <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
        <source src="/image/vscode/Video-showing-branch-coverage-run-using-the-Test-Explorer-and-branch-coverage-displayed.mp4" type="video/mp4">
        </video>

    * 通过 [Python 环境扩展](https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs)的 `>Python: Create Environment` 命令可以快速选择一个环境管理器创建一个 Python 环境。

        ![image](/image/vscode/python-envs-quick-create.png)

    * Python 环境聊天工具，通过 `#pythonGetEnvironmentInfo` 和 `#pythonInstallPackage` 可以提供 Python 环境信息并安装 Python 包。

        <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
        <source src="/image/vscode/Video-demoing-the-get-environment-information-tool-call-implicitly-by-the-model-in-agent-mode.mp4" type="video/mp4">
        </video>

        <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
        <source src="/image/vscode/Video-demoing-the-get-install-package-tool-call-for-numpy-version-2.mp4" type="video/mp4">
        </video>

    * Pylance 支持颜色选择。

        ![image](/image/vscode/pylance-color-picker.png)

    * 支持使用 AI 转化字符串格式。

        ![image](/image/vscode/pylance-convert-string.png)

        ```json
        "python.analysis.aiCodeActions": {"convertFormatString": true}
        ```

* GitHub Pull Requests and Issues，略，详见： [原文](https://code.visualstudio.com/updates/v1_100#_github-pull-requests-and-issues)。

## 扩展制作 (Extension Authoring)

* 文本编码 API 已稳定。
* NodeJS 扩展支持 ESM。

更多，详见： [原文](https://code.visualstudio.com/updates/v1_100#_extension-authoring)。

## API 提案 (Proposed APIs)

* Tool calling for images，详见： [原文](https://code.visualstudio.com/updates/v1_100#_tool-calling-for-images)。
* MCP服务器支持由扩展贡献。
* MCP 工具注释。
* 可变的行高。

    <video autoplay="" loop="" muted="" playsinline="" controls="" width="100%">
    <source src="/image/vscode/Video-that-shows-variable-line-heights-in-the-editor.mp4" type="video/mp4">
    </video>

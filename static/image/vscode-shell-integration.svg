<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1521px" height="941px" viewBox="-0.5 -0.5 1521 941" content="&lt;mxfile&gt;&lt;diagram id=&quot;shell-integration-seq&quot; name=&quot;Shell Integration Flow&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="510" y="0" width="500" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 498px; height: 1px; padding-top: 20px; margin-left: 511px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 24px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">VSCode Shell 集成工作流程</div></div></div></foreignObject><text x="760" y="27" fill="#333333" font-family="Helvetica" font-size="24px" text-anchor="middle" font-weight="bold">VSCode Shell 集成工作流程</text></switch></g><rect x="0" y="60" width="480" height="280" rx="42" ry="42" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><rect x="10" y="70" width="200" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 85px; margin-left: 12px;"><div data-drawio-colors="color: #1a3a5c; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(26, 58, 92); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">阶段 1: Shell 初始化</div></div></div></foreignObject><text x="12" y="89" fill="#1a3a5c" font-family="Helvetica" font-size="14px" font-weight="bold">阶段 1: Shell 初始化</text></switch></g><rect x="130" y="110" width="160" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 130px; margin-left: 131px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">VSCode 启动终端</div></div></div></foreignObject><text x="210" y="134" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">VSCode 启动终端</text></switch></g><path d="M 210 150 L 210 163.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 168.88 L 206.5 161.88 L 210 163.63 L 213.5 161.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="110" y="170" width="200" height="50" rx="7.5" ry="7.5" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 195px; margin-left: 111px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bash --init-file<br />vscode-shell-init.sh</div></div></div></foreignObject><text x="210" y="199" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">bash --init-file...</text></switch></g><rect x="320" y="180" width="150" height="30" rx="4.5" ry="4.5" fill="#ffe6cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 195px; margin-left: 321px;"><div data-drawio-colors="color: #d45500; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(212, 85, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术1: 自定义初始化脚本</div></div></div></foreignObject><text x="395" y="198" fill="#d45500" font-family="Helvetica" font-size="11px" text-anchor="middle">技术1: 自定义初始化脚本</text></switch></g><path d="M 210 220 L 189.97 236.02" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 185.87 239.3 L 189.15 232.2 L 189.97 236.02 L 193.53 237.66 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="60" y="240" width="250" height="80" rx="12" ry="12" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 238px; height: 1px; padding-top: 280px; margin-left: 72px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">初始化脚本执行:<div>• 先执行用户的 profile (~/.bashrc)<br /><div>• 修改 PS1 (注入 OSC 序列)<br />• 设置 DEBUG trap (preexec)<br />• 设置 PROMPT_COMMAND (postexec)</div></div></div></div></div></foreignObject><text x="72" y="284" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">初始化脚本执行:...</text></switch></g><rect x="320" y="265" width="150" height="30" rx="4.5" ry="4.5" fill="#ffe6cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 280px; margin-left: 321px;"><div data-drawio-colors="color: #d45500; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(212, 85, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术2: 命令执行 Hook</div></div></div></foreignObject><text x="395" y="283" fill="#d45500" font-family="Helvetica" font-size="11px" text-anchor="middle">技术2: 命令执行 Hook</text></switch></g><rect x="520" y="60" width="500" height="280" rx="42" ry="42" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><rect x="530" y="70" width="200" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 85px; margin-left: 532px;"><div data-drawio-colors="color: #2d5016; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(45, 80, 22); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">阶段 2: 显示 Prompt</div></div></div></foreignObject><text x="532" y="89" fill="#2d5016" font-family="Helvetica" font-size="14px" font-weight="bold">阶段 2: 显示 Prompt</text></switch></g><rect x="690" y="110" width="160" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 130px; margin-left: 691px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">Shell 输出 PS1</div></div></div></foreignObject><text x="770" y="134" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">Shell 输出 PS1</text></switch></g><path d="M 770 150 L 770 163.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 770 168.88 L 766.5 161.88 L 770 163.63 L 773.5 161.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="550" y="170" width="440" height="40" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 190px; margin-left: 551px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">\e]633;A\a  user@host:~/project$  \e]633;B\a</div></div></div></foreignObject><text x="770" y="193" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="11px" text-anchor="middle">\e]633;A\a  user@host:~/project$  \e]633;B\a</text></switch></g><rect x="550" y="220" width="80" height="40" rx="6" ry="6" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 240px; margin-left: 551px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">OSC 633;A<br />Prompt 开始</div></div></div></foreignObject><text x="590" y="243" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">OSC 633;A...</text></switch></g><rect x="730" y="220" width="80" height="40" rx="6" ry="6" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 240px; margin-left: 731px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">用户可见<br />提示符</div></div></div></foreignObject><text x="770" y="243" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">用户可见
提示符</text></switch></g><rect x="910" y="220" width="80" height="40" rx="6" ry="6" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 240px; margin-left: 911px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">OSC 633;B<br />Prompt 结束</div></div></div></foreignObject><text x="950" y="243" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">OSC 633;B...</text></switch></g><rect x="620" y="275" width="280" height="55" rx="8.25" ry="8.25" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 268px; height: 1px; padding-top: 303px; margin-left: 632px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">VSCode 监听 OSC<br />• 收到 633;A → 记录 Prompt 开始位置<br />• 收到 633;B → 记录命令输入开始位置</div></div></div></foreignObject><text x="632" y="306" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">VSCode 监听 OSC...</text></switch></g><rect x="910" y="285" width="100" height="30" rx="4.5" ry="4.5" fill="#ffe6cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 300px; margin-left: 911px;"><div data-drawio-colors="color: #d45500; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(212, 85, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术3: OSC 协议</div></div></div></foreignObject><text x="960" y="303" fill="#d45500" font-family="Helvetica" font-size="11px" text-anchor="middle">技术3: OSC 协议</text></switch></g><rect x="1060" y="60" width="460" height="180" rx="27" ry="27" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><rect x="1070" y="70" width="200" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 85px; margin-left: 1072px;"><div data-drawio-colors="color: #7a5900; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(122, 89, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">阶段 3: 用户输入命令</div></div></div></foreignObject><text x="1072" y="89" fill="#7a5900" font-family="Helvetica" font-size="14px" font-weight="bold">阶段 3: 用户输入命令</text></switch></g><rect x="1090" y="110" width="400" height="40" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 130px; margin-left: 1091px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">user@host:~/project$ ls -la</div></div></div></foreignObject><text x="1290" y="134" fill="#333333" font-family="Courier New" font-size="12px" text-anchor="middle">user@host:~/project$ ls -la</text></switch></g><rect x="1160" y="155" width="260" height="25" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 168px; margin-left: 1161px;"><div data-drawio-colors="color: #666666; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(102, 102, 102); line-height: 1.2; pointer-events: all; font-style: italic; white-space: normal; overflow-wrap: normal;">用户输入的命令 (在 633;B 之后)</div></div></div></foreignObject><text x="1290" y="171" fill="#666666" font-family="Helvetica" font-size="11px" text-anchor="middle" font-style="italic">用户输入的命令 (在 633;B 之后)</text></switch></g><rect x="1090" y="190" width="400" height="35" rx="5.25" ry="5.25" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 208px; margin-left: 1091px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">VSCode 追踪: 命令输入区域 = [633;B] 到 [光标位置]</div></div></div></foreignObject><text x="1290" y="211" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">VSCode 追踪: 命令输入区域 = [633;B] 到 [光标位置]</text></switch></g><rect x="0" y="380" width="520" height="320" rx="48" ry="48" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><rect x="10" y="390" width="280" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 278px; height: 1px; padding-top: 405px; margin-left: 12px;"><div data-drawio-colors="color: #5c3566; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(92, 53, 102); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">阶段 4: 命令执行开始 (用户按回车)</div></div></div></foreignObject><text x="12" y="409" fill="#5c3566" font-family="Helvetica" font-size="14px" font-weight="bold">阶段 4: 命令执行开始 (用户按回车)</text></switch></g><rect x="130" y="430" width="200" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 450px; margin-left: 131px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">DEBUG trap 触发 (preexec)</div></div></div></foreignObject><text x="230" y="454" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">DEBUG trap 触发 (preexec)</text></switch></g><rect x="340" y="435" width="160" height="30" rx="4.5" ry="4.5" fill="#ffe6cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 450px; margin-left: 341px;"><div data-drawio-colors="color: #d45500; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(212, 85, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术2: 命令执行前 Hook</div></div></div></foreignObject><text x="420" y="453" fill="#d45500" font-family="Helvetica" font-size="11px" text-anchor="middle">技术2: 命令执行前 Hook</text></switch></g><path d="M 230 470 L 230 483.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 488.88 L 226.5 481.88 L 230 483.63 L 233.5 481.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="90" y="490" width="280" height="45" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 268px; height: 1px; padding-top: 513px; margin-left: 102px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">printf '\e]633;C\a'<br />printf '\e]633;E;%s\a' "ls -la"</div></div></div></foreignObject><text x="102" y="516" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="11px">printf '\e]633;C\a'...</text></switch></g><rect x="380" y="500" width="130" height="30" rx="4.5" ry="4.5" fill="#ffe6cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 515px; margin-left: 381px;"><div data-drawio-colors="color: #d45500; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(212, 85, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术3: 发送 OSC 序列</div></div></div></foreignObject><text x="445" y="518" fill="#d45500" font-family="Helvetica" font-size="11px" text-anchor="middle">技术3: 发送 OSC 序列</text></switch></g><path d="M 230 535 L 230 548.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 553.88 L 226.5 546.88 L 230 548.63 L 233.5 546.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="90" y="555" width="280" height="55" rx="8.25" ry="8.25" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 268px; height: 1px; padding-top: 583px; margin-left: 102px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">VSCode 监听 OSC<br />• 收到 633;C → 标记命令执行开始<br />• 收到 633;E → 获取命令内容</div></div></div></foreignObject><text x="102" y="586" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">VSCode 监听 OSC...</text></switch></g><path d="M 230 610 L 230 623.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 628.88 L 226.5 621.88 L 230 623.63 L 233.5 621.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="90" y="630" width="280" height="55" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 268px; height: 1px; padding-top: 658px; margin-left: 102px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 10px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">命令实际执行: ls -la<br />total 32<br />drwxr-xr-x  5 user user 4096 ...</div></div></div></foreignObject><text x="102" y="661" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="10px">命令实际执行: ls -la...</text></switch></g><rect x="380" y="645" width="80" height="25" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 658px; margin-left: 381px;"><div data-drawio-colors="color: #666666; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(102, 102, 102); line-height: 1.2; pointer-events: all; font-style: italic; white-space: normal; overflow-wrap: normal;">命令输出</div></div></div></foreignObject><text x="420" y="661" fill="#666666" font-family="Helvetica" font-size="11px" text-anchor="middle" font-style="italic">命令输出</text></switch></g><rect x="560" y="380" width="520" height="320" rx="48" ry="48" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><rect x="570" y="390" width="200" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 405px; margin-left: 572px;"><div data-drawio-colors="color: #2d5016; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(45, 80, 22); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">阶段 5: 命令执行结束</div></div></div></foreignObject><text x="572" y="409" fill="#2d5016" font-family="Helvetica" font-size="14px" font-weight="bold">阶段 5: 命令执行结束</text></switch></g><rect x="710" y="430" width="250" height="40" rx="6" ry="6" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 450px; margin-left: 711px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">PROMPT_COMMAND 触发 (postexec)</div></div></div></foreignObject><text x="835" y="454" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">PROMPT_COMMAND 触发 (postexec)</text></switch></g><rect x="970" y="435" width="160" height="30" rx="4.5" ry="4.5" fill="#ffe6cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 450px; margin-left: 971px;"><div data-drawio-colors="color: #d45500; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(212, 85, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术2: 命令执行后 Hook</div></div></div></foreignObject><text x="1050" y="453" fill="#d45500" font-family="Helvetica" font-size="11px" text-anchor="middle">技术2: 命令执行后 Hook</text></switch></g><path d="M 835 470 L 814.97 486.02" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 810.87 489.3 L 814.15 482.2 L 814.97 486.02 L 818.53 487.66 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="660" y="490" width="300" height="45" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 288px; height: 1px; padding-top: 513px; margin-left: 672px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">printf '\e]633;D;%s\a' "$?"<br />printf '\e]633;P;Cwd=%s\a' "$PWD"</div></div></div></foreignObject><text x="672" y="516" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="11px">printf '\e]633;D;%s\a' "$?"...</text></switch></g><rect x="970" y="500" width="140" height="30" rx="4.5" ry="4.5" fill="#ffe6cc" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 515px; margin-left: 971px;"><div data-drawio-colors="color: #d45500; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(212, 85, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术3: 发送退出码/目录</div></div></div></foreignObject><text x="1040" y="518" fill="#d45500" font-family="Helvetica" font-size="11px" text-anchor="middle">技术3: 发送退出码/目录</text></switch></g><path d="M 810 535 L 794.5 550.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 790.79 554.21 L 793.27 546.78 L 794.5 550.5 L 798.22 551.73 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="640" y="555" width="300" height="55" rx="8.25" ry="8.25" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 288px; height: 1px; padding-top: 583px; margin-left: 652px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">VSCode 监听 OSC<br />• 收到 633;D;0 → 命令成功 (exitcode=0)<br />• 收到 633;P;Cwd=/home/user/project</div></div></div></foreignObject><text x="652" y="586" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">VSCode 监听 OSC...</text></switch></g><path d="M 790 610 L 790 623.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 790 628.88 L 786.5 621.88 L 790 623.63 L 793.5 621.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="660" y="630" width="260" height="60" rx="9" ry="9" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 660px; margin-left: 672px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">VSCode 更新状态:<br />• 在命令旁显示 ✓ 或 ✗ 图标<br />• 更新 cwd 追踪<br />• 记录命令边界用于导航</div></div></div></foreignObject><text x="672" y="664" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">VSCode 更新状态:...</text></switch></g><path d="M 480 200 L 511.76 200" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 517.76 200 L 509.76 204 L 511.76 200 L 509.76 196 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 1020 200 L 1051.76 200" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1057.76 200 L 1049.76 204 L 1051.76 200 L 1049.76 196 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 1290 240 Q 1290 330 1165 345 Q 1040 360 895 355 Q 750 350 238.22 379.53" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 232.23 379.87 L 239.99 375.42 L 238.22 379.53 L 240.45 383.4 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 318px; margin-left: 1218px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">用户按回车</div></div></div></foreignObject><text x="1218" y="322" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">用户按回车</text></switch></g><path d="M 520 540 L 551.76 540" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 557.76 540 L 549.76 544 L 551.76 540 L 549.76 536 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 540px; margin-left: 540px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">命令执行完毕</div></div></div></foreignObject><text x="540" y="543" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">命令执行完毕</text></switch></g><path d="M 920 700 Q 1160 700 1160 520 Q 1160 340 778.24 340" fill="none" stroke="#82b366" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke"/><path d="M 772.24 340 L 780.24 336 L 778.24 340 L 780.24 344 Z" fill="#82b366" stroke="#82b366" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 445px; margin-left: 1160px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">循环回到阶段 2</div></div></div></foreignObject><text x="1160" y="448" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">循环回到阶段 2</text></switch></g><rect x="0" y="740" width="1080" height="200" rx="30" ry="30" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><rect x="10" y="750" width="200" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 765px; margin-left: 12px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">OSC 633 序列时序图</div></div></div></foreignObject><text x="12" y="769" fill="#333333" font-family="Helvetica" font-size="14px" font-weight="bold">OSC 633 序列时序图</text></switch></g><path d="M 40 800 L 1031.76 800" fill="none" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1037.76 800 L 1029.76 804 L 1031.76 800 L 1029.76 796 Z" fill="#333333" stroke="#333333" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="1000" y="780" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 48px; height: 1px; padding-top: 790px; margin-left: 1002px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">时间轴</div></div></div></foreignObject><text x="1002" y="793" fill="#333333" font-family="Helvetica" font-size="11px">时间轴</text></switch></g><rect x="10" y="820" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 38px; height: 1px; padding-top: 830px; margin-left: 10px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: right;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">Shell:</div></div></div></foreignObject><text x="48" y="833" fill="#333333" font-family="Helvetica" font-size="11px" text-anchor="end" font-weight="bold">Shell:</text></switch></g><rect x="60" y="820" width="50" height="25" rx="3.75" ry="3.75" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 833px; margin-left: 61px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">633;A</div></div></div></foreignObject><text x="85" y="836" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">633;A</text></switch></g><rect x="120" y="820" width="60" height="25" rx="3.75" ry="3.75" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 833px; margin-left: 121px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">prompt</div></div></div></foreignObject><text x="150" y="836" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">prompt</text></switch></g><rect x="190" y="820" width="50" height="25" rx="3.75" ry="3.75" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 833px; margin-left: 191px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">633;B</div></div></div></foreignObject><text x="215" y="836" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">633;B</text></switch></g><rect x="380" y="820" width="50" height="25" rx="3.75" ry="3.75" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 833px; margin-left: 381px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">633;C</div></div></div></foreignObject><text x="405" y="836" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">633;C</text></switch></g><rect x="440" y="820" width="200" height="25" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 833px; margin-left: 441px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">执行中</div></div></div></foreignObject><text x="540" y="836" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">执行中</text></switch></g><rect x="650" y="820" width="60" height="25" rx="3.75" ry="3.75" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 833px; margin-left: 651px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">633;D;0</div></div></div></foreignObject><text x="680" y="836" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">633;D;0</text></switch></g><rect x="720" y="820" width="90" height="25" rx="3.75" ry="3.75" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 833px; margin-left: 721px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">633;P;Cwd=...</div></div></div></foreignObject><text x="765" y="836" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">633;P;Cwd=...</text></switch></g><rect x="10" y="860" width="40" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 38px; height: 1px; padding-top: 870px; margin-left: 10px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: right;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">用户:</div></div></div></foreignObject><text x="48" y="873" fill="#333333" font-family="Helvetica" font-size="11px" text-anchor="end" font-weight="bold">用户:</text></switch></g><rect x="250" y="860" width="70" height="25" rx="3.75" ry="3.75" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 873px; margin-left: 251px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">输入命令</div></div></div></foreignObject><text x="285" y="876" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">输入命令</text></switch></g><rect x="330" y="860" width="50" height="25" rx="3.75" ry="3.75" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 873px; margin-left: 331px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">按回车</div></div></div></foreignObject><text x="355" y="876" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">按回车</text></switch></g><rect x="0" y="900" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 48px; height: 1px; padding-top: 910px; margin-left: 0px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: right;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">VSCode:</div></div></div></foreignObject><text x="48" y="913" fill="#333333" font-family="Helvetica" font-size="11px" text-anchor="end" font-weight="bold">VSCode:</text></switch></g><rect x="60" y="895" width="60" height="35" rx="5.25" ry="5.25" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 913px; margin-left: 61px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Prompt区<br />开始</div></div></div></foreignObject><text x="90" y="915" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="9px" text-anchor="middle">Prompt区...</text></switch></g><rect x="190" y="895" width="70" height="35" rx="5.25" ry="5.25" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 68px; height: 1px; padding-top: 913px; margin-left: 191px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">命令输入区<br />开始</div></div></div></foreignObject><text x="225" y="915" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="9px" text-anchor="middle">命令输入区
开始</text></switch></g><rect x="380" y="895" width="50" height="35" rx="5.25" ry="5.25" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 913px; margin-left: 381px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">命令<br />执行中</div></div></div></foreignObject><text x="405" y="915" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="9px" text-anchor="middle">命令
执行中</text></switch></g><rect x="650" y="890" width="80" height="45" rx="6.75" ry="6.75" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 913px; margin-left: 651px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">执行完成<br />exitcode=0<br />cwd=...</div></div></div></foreignObject><text x="690" y="915" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="9px" text-anchor="middle">执行完成exitcode=0...</text></switch></g><rect x="1120" y="740" width="400" height="200" rx="30" ry="30" fill="#ffffff" stroke="#333333" pointer-events="all"/><rect x="1130" y="750" width="50" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 48px; height: 1px; padding-top: 765px; margin-left: 1132px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">图例</div></div></div></foreignObject><text x="1132" y="769" fill="#333333" font-family="Helvetica" font-size="14px" font-weight="bold">图例</text></switch></g><rect x="1140" y="790" width="30" height="20" rx="3" ry="3" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><rect x="1180" y="790" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 98px; height: 1px; padding-top: 800px; margin-left: 1182px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">OSC 转义序列</div></div></div></foreignObject><text x="1182" y="803" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">OSC 转义序列</text></switch></g><rect x="1140" y="820" width="30" height="20" rx="3" ry="3" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><rect x="1180" y="820" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 98px; height: 1px; padding-top: 830px; margin-left: 1182px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">VSCode 处理</div></div></div></foreignObject><text x="1182" y="833" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">VSCode 处理</text></switch></g><rect x="1140" y="850" width="30" height="20" rx="3" ry="3" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><rect x="1180" y="850" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 98px; height: 1px; padding-top: 860px; margin-left: 1182px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Shell 执行</div></div></div></foreignObject><text x="1182" y="863" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">Shell 执行</text></switch></g><rect x="1140" y="880" width="30" height="20" rx="3" ry="3" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><rect x="1180" y="880" width="120" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 118px; height: 1px; padding-top: 890px; margin-left: 1182px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">用户操作 / 触发点</div></div></div></foreignObject><text x="1182" y="893" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">用户操作 / 触发点</text></switch></g><rect x="1140" y="910" width="30" height="20" rx="3" ry="3" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><rect x="1180" y="910" width="120" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 118px; height: 1px; padding-top: 920px; margin-left: 1182px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Hook / 脚本执行</div></div></div></foreignObject><text x="1182" y="923" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">Hook / 脚本执行</text></switch></g><rect x="1320" y="790" width="30" height="20" rx="3" ry="3" fill="#ffe6cc" stroke="#d45500" pointer-events="all"/><rect x="1360" y="790" width="80" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 78px; height: 1px; padding-top: 800px; margin-left: 1362px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">技术标注</div></div></div></foreignObject><text x="1362" y="803" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">技术标注</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>